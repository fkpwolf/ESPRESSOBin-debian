# ESPRESSOBin specific kernel configuration

# Marvell Armada 3720 SoC support
CONFIG_ARCH_MVEBU=y
CONFIG_MACH_ARMADA_3720=y

# Clock and Power Management
CONFIG_ARMADA_3700_CLK=y
CONFIG_ARMADA_THERMAL=y

# PCI/PCIe support (required for mini-PCIe slot and WiFi cards)
CONFIG_PCI=y
CONFIG_PCIEPORTBUS=y
# Use Aardvark PCIe driver for Armada 3720 (not ARMADA_8K which is for 8040/8K SoCs)
CONFIG_PCI_AARDVARK=y
# MSI support enabled in kernel, but disabled at runtime via pci=nomsi boot parameter
# for better PCIe stability on Armada 3720
CONFIG_PCI_MSI=y

# Network
CONFIG_MVNETA=y
CONFIG_PHYLIB=y
CONFIG_MARVELL_PHY=y
CONFIG_MARVELL_10G_PHY=y

# DSA (Distributed Switch Architecture) support for Topaz switch
CONFIG_NET_DSA=y
CONFIG_NET_DSA_MV88E6XXX=y
CONFIG_NET_DSA_MV88E6XXX_GLOBAL2=y
CONFIG_NET_DSA_TAG_EDSA=y
CONFIG_NET_DSA_TAG_DSA=y

# DMA
CONFIG_MV_XOR_V2=y

# Crypto
CONFIG_CRYPTO_DEV_MARVELL_CESA=y

# MMC/SD
CONFIG_MMC_SDHCI=y
CONFIG_MMC_SDHCI_XENON=y

# GPIO and Pin Control
CONFIG_PINCTRL_ARMADA_37XX=y
CONFIG_GPIO_ARMADA_37XX=y

# Serial
CONFIG_SERIAL_MVEBU_UART=y
CONFIG_SERIAL_MVEBU_UART_CONSOLE=y

# SPI
CONFIG_SPI=y
CONFIG_SPI_ARMADA_3700=y

# I2C
CONFIG_I2C=y
CONFIG_I2C_MV64XXX=y

# SATA
CONFIG_ATA=y
CONFIG_AHCI_MVEBU=y

# USB
CONFIG_USB=y
CONFIG_USB_XHCI_HCD=y
CONFIG_USB_XHCI_MVEBU=y
CONFIG_USB_STORAGE=y

# PHY
CONFIG_PHY_MVEBU_A3700_COMPHY=y
CONFIG_PHY_MVEBU_A3700_UTMI=y

# Regulator
CONFIG_REGULATOR=y
CONFIG_REGULATOR_GPIO=y

# Watchdog
CONFIG_ARMADA_37XX_WATCHDOG=y

# Real Time Clock
CONFIG_RTC_CLASS=y
CONFIG_RTC_DRV_ARMADA38X=y

# LED support
CONFIG_LEDS_CLASS=y
CONFIG_LEDS_GPIO=y

# CPUFREQ
CONFIG_ARM_ARMADA_37XX_CPUFREQ=y

# Additional filesystem support
CONFIG_EXT4_FS=y
CONFIG_VFAT_FS=y
CONFIG_TMPFS=y

# Additional networking
CONFIG_PACKET=y
CONFIG_UNIX=y
CONFIG_INET=y
CONFIG_IP_PNP=y
CONFIG_IP_PNP_DHCP=y

# Device tree support
CONFIG_OF=y
CONFIG_OF_FLATTREE=y

# WiFi support
CONFIG_WLAN=y
CONFIG_CFG80211=m
CONFIG_MAC80211=m

# Qualcomm Atheros AR93xx WiFi support (ath9k)
CONFIG_WLAN_VENDOR_ATH=y
CONFIG_ATH_CARDS=m
CONFIG_ATH_COMMON=m
CONFIG_ATH9K=m
CONFIG_ATH9K_HW=m
CONFIG_ATH9K_PCI=m
CONFIG_ATH9K_COMMON=m

# MediaTek MT7922 WiFi support (mt7921e)
CONFIG_WLAN_VENDOR_MEDIATEK=y
CONFIG_MT76_CORE=m
CONFIG_MT76_CONNAC_LIB=m
CONFIG_MT7921_COMMON=m
CONFIG_MT7921E=m